# 使用区块链、边缘计算技术混合架构的电子健康记录访问控制(Access Control for Electronic Health Records with Hybrid Blockchain-Edge Architecture)

#### 肖云帆

## 预先了解

### 重点术语预览

* 电子健康记录 EHR(Electronic Health Record)
* eHealth 电子健康
* 访问控制列表 ACL(Access Control List): 一种基于包过滤的访问控制技术
* 边缘节点 edge node
* 缩写授权语言 ALFA(Abbreviated Language For Authorization): 边缘节点使用的一种语言
* 可扩展访问控制标记语言 XACML(eXtensible Access Control Markup Language)

### EHR现状

* EHR数据一直将急剧增长，但是数据的隐私保护做的还不够，每年仍有大量数据被泄露盗窃。因此在电子健康领域的核心议题在于EHR数据的安全保护
* 尽管有相关条文和基础安全保护，但是由于EHR数据的**高度分布化、碎片化**，数据拥有者和使用者间的**复杂关系**，为EHR数据提供提供灵活和细粒度的访问控制解决方案是相当重要的
* 使用区块链技术的设施通过共识机制验证记录数据，但是数据的管理方面存在两个缺点
    1. 尽管区块链技术保证数据的完整性，但是缺乏有效的控制访问机制容纳不同分区的协同操作
    2. 区块的大小不足以容纳一些EHR数据：医学成像
* 所以引入边缘节点来改善这种架构

## 论文内容

### I 基本原理概况

*  在Hyperledger Composer Fabric区块链上编写、运行基于ACL技术的智能合约，实现对EHR数据基于身份识别的控制访问，保证了将合法日志数据写入区块链的可追踪性和可靠性
* 边缘节点存储EHR数据，进一步使用缩写授权语言ALFA编写的特定策略来实现基于属性的访问控制ABAC(Attribute-based AC)。ALFA则直接映射到可扩展访问控制标记语言(XACML)并提供简洁的表示。存储在边缘节点中的数据也使用hash来保护
* 此外，智能合约还使用了一次性的url来包含边缘节点上存储数据的地址，当医疗提供者在成功执行了访问控制后将获得这样的url来获取数据，因此只有授权者才能访问这些数据。
* 遂进行控制变量的实验论证

### II 相关知识

1. 可扩展访问控制标记语言 XACML
    * 是定义细粒度，基于属性的访问控制策略语言的标准
    * 定义了参考体系结构和处理模型，以根据访问策略中定义的规则评估访问请求。
    * XACML的大概工作原理（略）：不用了解
2. 缩写授权语言 ALFA
    * XACML复杂的设计和语法难以书写，因此使用ALFA来指定控制策略并直接映射到XACML。（就好比mybatis、hibernate从接口到xml配置文件的映射）
    * 使用ALFA的关键部件（属性attributes，目标target，条件conditions，规则rule，策略policy，职责obligation）在EHR数据上施加各样的基于属性的控制访问ABAC策略。
3. 电子医疗传感器平台 eHealth Sensor Platform
    * 可穿戴的传感器科技的运用，收集EHR数据，在平台如MySignals，和患者的传感器数据通过边缘节点形成数据的互通
4. Hyperledger Composer Fabric
    * Hyperledger旗下的一个区块链实现平台，提供模块化和可拓展的架构，允许像共识机制这样的组件可插拔。使用容器技术来构建智能合约（或者称为链码）
    * 提供隐私保护、许可的(permissioned)网络
    * 都了解过很多了，此处不再赘述

### III 系统架构

> 本文的重点部分！！！

* 论文提供了一个流程图和一个顺序图来说明系统的工作流程，需要看一下理解（很简单，看一下就懂）
    * 实体：病人、医疗提供者、智能传感器/成像设备、EHR数据、边缘节点、区块链
    * 
* 在HyperLedger Composer Fabric平台上的一个基于区块链的web应用。包含四个编程部分
    1. 在模型文件（.cto）中定义网络功能，其中包括参与者，URL地址，事务和访问控制日志
    2. 在包含事务处理功能的脚本文件（.js）中编写智能合约
    3. 为访问控制文件（.acl）中的不同参与者定义ACL规则
    4. 在查询文件（.qry）中定义数据库查询。

参与者代表患者和医生。患者EHR地址被保存为区块链网络中的个人资产 换句话说，患者和EHR资产具有一对一的关系，两者均由患者ID标识。由ACL授权，允许医生检索其患者的EHR地址，而仅允许患者检索其自己的EHR地址。检索功能被定义为智能合约中的交易过程，并由提交其请求的参与者调用。最后，所有历史检索事件都保存为区块链网络上不可更改且可追溯的EHR访问控制日志。在边缘节点从患者那里收集EHR数据之后，患者可以对他或她的EHR数据执行ACL策略。通过定义ACL策略，它可以确定允许用户读取，写入和更新内容的数据。当ACL策略在区块链网络中可用时，数据用户（例如医生或护士）可以向患者发送访问请求以获得访问批准，并接收存储在边缘节点中的实际EHR数据的URL地址。

* ACL访问控制策略
    * 非条件规则用于控制对特定参与者组的访问策略。
    * 有条件的ACL规则可以表示各种AND门访问控制策略，并在操作结果上返回布尔结果

* 哈希
    * 通过将哈希摘要结果包含在智能合约和交易中，该信息将永久保存在区块链网络上。当数据被恶意修改可以轻松发现
* 一次性自毁式url
    * 当请求信息通过ACL策略时才会给医疗提供者返回一个自毁式url以获得对应边缘节点的存储数据


### IV 实验预评估

> 可以不用看，就是展示数据而已，说自己的系统怎么怎么好。。

* 要点：系统以毫秒为单位提供结果，使其适合用于实时和安全的EHR数据访问控制框架

### V 安全性分析

> 了解系统的原理的话其实就不用看了

* 因为数据存储的永久性、数据的可追踪性等等，在面对EHR欺骗攻击、假冒的医疗提供者攻击，系统展示了良好的鲁棒性容错性


### VI 相关工作

> 引用了一些相关的关于区块链访问控制的研究工作... 这些直接goolge机翻了，随便看一下就好，有需要可以翻看相关文献

1. Azaria等提出了一个分布式的记录管理系统来处理电子病历。该系统为患者提供了不变的日志，并易于访问他们的医疗信息。但是，使用的协议基于工作量证明的共识机制，这会消耗大量的计算资源。
2. Measa等提出了一种基于区块链的解决方案，用于发布表示资源访问权的策略，并允许在用户之间进行此类权限的分布式传输。作者介绍了一种基于比特币的概念验证实现，但未描述任何实验或评估。
3. Wang等提出了一个基于区块链的iOS应用，称为医疗数据网关，以使患者拥有，控制和共享自己的数据。
4. Ekblaw提出了MedRec原型，为患者提供不变的日志，并在医疗保健提供者和治疗地点之间访问他们的医疗信息。他们提出医疗利益相关者可以以区块链“矿工”的身份参与网络。
5. Guo等提出了一种基于属性的签名方案，该方案具有多个EHR数据权限。 在该方案中，患者根据她的属性认可消息，同时不公开任何信息，除了该患者已证明的50个证据。
6. Xia等提出了MedShare，一种基于区块链的系统，用于在不同实体之间共享云存储库中的医疗数据。他们部署智能合约和访问控制机制来跟踪数据流并检测违规情况。已经进行了各种尝试来解决使用区块链进行数据管理中的适当访问控制问题。
7. Zyskind等描述了一种分散式数据管理系统，该系统可确保用户拥有并控制其数据，并提出了协议以启用使用多方计算的自动访问控制管理器。
8. Wang等描述了一种在以太坊区块链和基于属性的加密技术相结合的分散存储系统中，用于基于数据共享的基于区块链的框架。
9. Guo等提出了一种利用以太坊智能合约的基于多权限属性的访问控制机制。
10. Ouaddah等提出了FairAccess框架，以包括用于授予，获取，委托和撤销访问权的交易。作为概念验证，FairAccess是使用本地区块链在Raspberry Pi设备上实现的。

> 最后总结：本文是首次将Hyperledger Composer Fabric区块链平台与提供智能合约和ACL的EHR数据的链上访问控制日志以及用于执行ABAC策略的链下边缘节点进行集成的研究在EHR数据上。还开发了一个区块链网络原型来评估系统性能

### VII 结论

> 略